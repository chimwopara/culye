<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://js.stripe.com https://cdn.tailwindcss.com https://fonts.googleapis.com; connect-src 'self' https://api.stripe.com https://script.google.com https://us-central1-culye-57a22.cloudfunctions.net https://fonts.googleapis.com; frame-src 'self' https://js.stripe.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdn.tailwindcss.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:;">
  <title>Culye Immigration Services | Your Bridge to Canada</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://js.stripe.com/v3/" crossorigin="anonymous"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #0a0a0a;
      color: #e5e7eb;
    }
    .form-step {
      display: none;
      animation: fadeIn 0.5s ease-in-out;
    }
    .form-step.active {
      display: block;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .progress-bar-fill {
      transition: width 0.5s ease-in-out;
    }
    .radio-card {
      transition: all 0.2s ease-in-out;
    }
    .radio-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    input[type="radio"]:checked + .radio-card {
      border-color: #2563eb;
      background-color: #1e3a8a;
      color: white;
    }
    .nav-link {
      position: relative;
      transition: color 0.3s;
    }
    .nav-link::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: -4px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #3b82f6;
      transition: width 0.3s;
    }
    .nav-link:hover::after, .nav-link.active::after {
      width: 100%;
    }
    .StripeElement {
      background-color: #1f2937;
      padding: 12px 16px;
      border-radius: 8px;
      border: 1px solid #4b5563;
      color: #e5e7eb;
    }
    .StripeElement--focus {
      border-color: #3b82f6;
    }
    @keyframes fade-in-up {
        0% {
            opacity: 0;
            transform: translateY(20px);
        }
        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }
    .animate-fade-in-up {
        animation: fade-in-up 0.8s ease-out forwards;
    }
    
    /* Modern Custom Dropdown Styles */
    .custom-dropdown {
      position: relative;
      width: 100%;
    }
    
    .dropdown-button {
      width: 100%;
      background-color: #1f2937;
      border: 2px solid #374151;
      border-radius: 12px;
      padding: 14px 16px;
      color: #e5e7eb;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s ease;
    }
    
    .dropdown-button:hover {
      border-color: #4b5563;
      background-color: #374151;
    }
    
    .dropdown-button:focus, .dropdown-button.active {
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      outline: none;
    }
    
    .dropdown-icon {
      transition: transform 0.3s ease;
    }
    
    .dropdown-button.active .dropdown-icon {
      transform: rotate(180deg);
    }
    
    .dropdown-menu {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background-color: #1f2937;
      border: 2px solid #374151;
      border-radius: 12px;
      margin-top: 4px;
      max-height: 200px;
      overflow-y: auto;
      z-index: 50;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
    }
    
    .dropdown-menu.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
    
    .dropdown-option {
      padding: 12px 16px;
      color: #e5e7eb;
      cursor: pointer;
      transition: background-color 0.2s ease;
      border-bottom: 1px solid #374151;
    }
    
    .dropdown-option:last-child {
      border-bottom: none;
    }
    
    .dropdown-option:hover {
      background-color: #374151;
    }
    
    .dropdown-option.selected {
      background-color: #3b82f6;
      color: white;
    }
    
    /* Custom Checkbox/Radio Styles */
    .custom-checkbox, .custom-radio {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      background-color: #1f2937;
      border: 2px solid #374151;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 12px;
    }
    
    .custom-checkbox:hover, .custom-radio:hover {
      border-color: #4b5563;
      background-color: #374151;
    }
    
    .custom-checkbox input, .custom-radio input {
      margin-right: 12px;
      width: 18px;
      height: 18px;
      accent-color: #3b82f6;
    }
    .custom-radio label, .custom-checkbox label {
  flex: 1;
  cursor: pointer;
  display: flex;
  align-items: center;
}
    
    .custom-checkbox.checked, .custom-radio.checked {
      border-color: #3b82f6;
      background-color: #1e3a8a;
    }
    .price-update {
      transition: all 0.3s ease-in-out;
    }
    .scroll-hint {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0.7;
      animation: bounce 2s infinite;
      cursor: pointer;
      transition: opacity 0.3s;
    }
    .scroll-hint:hover {
      opacity: 1;
    }
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {
        transform: translateX(-50%) translateY(0);
      }
      40% {
        transform: translateX(-50%) translateY(-10px);
      }
      60% {
        transform: translateX(-50%) translateY(-5px);
      }
    }
  </style>
</head>
<body class="bg-gray-900 text-gray-200">

  <!-- Header -->
  <header class="bg-gray-900/80 backdrop-blur-md fixed top-0 left-0 right-0 z-50 transition-all duration-300" id="header">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-20">
        <div class="flex-shrink-0">
          <a href="#home" class="flex items-center space-x-2">
            <img class="h-10 w-auto" src="logo.png" alt="Culye Immigration Services Logo" onerror="this.onerror=null;this.src='https://placehold.co/200x80/0a0a0a/ffffff?text=Culye+Inc.';">
            <span class="text-xl font-bold text-white"></span>
          </a>
        </div>
        <div class="hidden md:block">
          <div class="ml-10 flex items-baseline space-x-4">
            <a href="#home" class="nav-link text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Home</a>
            <a href="#about" class="nav-link text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">About</a>
            <a href="#services" class="nav-link text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Services</a>
            <a href="#process" class="nav-link text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Process</a>
            <a href="#contact" class="nav-link text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Assessment</a>
          </div>
        </div>
        <div class="hidden md:block">
             <a href="#contact" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg text-sm transition duration-300 transform hover:scale-105">
                Contact Us
            </a>
        </div>
        <div class="-mr-2 flex md:hidden">
          <button id="mobile-menu-button" type="button" class="bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white">
            <span class="sr-only">Open main menu</span>
            <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
            </svg>
            <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      </div>
    </div>
    <div id="mobile-menu" class="md:hidden hidden">
      <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
        <a href="#home" class="block text-gray-300 hover:text-white px-3 py-2 rounded-md text-base font-medium">Home</a>
        <a href="#about" class="block text-gray-300 hover:text-white px-3 py-2 rounded-md text-base font-medium">About</a>
        <a href="#services" class="block text-gray-300 hover:text-white px-3 py-2 rounded-md text-base font-medium">Services</a>
        <a href="#process" class="block text-gray-300 hover:text-white px-3 py-2 rounded-md text-base font-medium">Process</a>
        <a href="#contact" class="block text-gray-300 hover:text-white px-3 py-2 rounded-md text-base font-medium">Assessment</a>
         <a href="#contact" class="block bg-blue-600 hover:bg-blue-700 text-white font-bold mt-2 py-2 px-3 rounded-lg text-base transition duration-300">
            Contact Us
        </a>
      </div>
    </div>
  </header>

  <main>
  <!-- Hero Section -->
  <section id="home" class="relative text-white min-h-screen flex items-center justify-center">
    <!-- Mobile background -->
    <div class="absolute inset-0 bg-cover bg-center md:hidden" style="background-image: url('mobilehero.png');"></div>
    <!-- Desktop background -->
    <div class="absolute inset-0 bg-cover bg-center hidden md:block" style="background-image: url('hero.png');"></div>

    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/70 to-transparent"></div>
    <div class="relative z-10 text-center px-4 animate-fade-in-up">
      <h1 class="text-4xl md:text-7xl font-extrabold tracking-tight mb-4 leading-tight" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.7);">
        Your Bridge to a Future in Canada
      </h1>
      <p class="text-lg md:text-2xl max-w-3xl mx-auto mb-8 text-gray-200" style="text-shadow: 1px 1px 4px rgba(0,0,0,0.7);">
        Expert guidance for a seamless immigration journey. From Edmonton to the world, we make your Canadian dream a reality.
      </p>
      <button onclick="smoothScroll('#contact')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-lg text-lg transition duration-300 transform hover:scale-105 shadow-lg">
        Start Your Assessment
      </button>
    </div>
    
    <!-- Scroll Hint -->
    <div class="scroll-hint z-20" onclick="smoothScroll('#about')">
      <div class="flex flex-col items-center text-white">
        <span class="text-sm mb-2 font-medium">Scroll to explore</span>
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
        </svg>
      </div>
    </div>
  </section>

    <!-- About Section -->
    <section id="about" class="py-20 md:py-32 bg-gray-900">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="lg:grid lg:grid-cols-2 lg:gap-16 lg:items-center">
          <div>
            <h2 class="text-3xl font-extrabold text-white sm:text-4xl mb-4">Meet Your Regulated Canadian Immigration Consultant (RCIC)</h2>
            <p class="text-lg text-gray-400 mb-6">Our Consultant, Omolara Kuye is an active member of the Immigration Consultants of Canada Regulatory Council (ICCRC) with Mem ID R531179. She is in good standing and possesses good knowledge of Canadian immigration law with the authorization to provide genuine and professional advice in the best interest of clients.</p>
            <a href="https://college-ic.ca/protecting-the-public/find-an-immigration-consultant" target="_blank" class="inline-block bg-transparent border border-blue-500 text-blue-500 hover:bg-blue-500 hover:text-white font-semibold py-3 px-6 rounded-lg transition duration-300">
              Verify Status with RCIC
            </a>
          </div>
          <div class="mt-10 lg:mt-0">
            <img class="rounded-xl shadow-2xl mx-auto" src="me.png" alt="Omolara Kuye, RCIC" onerror="this.onerror=null;this.src='https://placehold.co/600x600/111827/ffffff?text=Omolara+Kuye';">
          </div>
        </div>
      </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="py-20 md:py-32 bg-black">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-extrabold text-white sm:text-4xl">Our Immigration Services</h2>
                <p class="mt-4 text-lg text-gray-400 max-w-3xl mx-auto">We provide professional consultation and representation on all permanent and temporary Canadian visas & permits, and Canadian Citizenship applications.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Service Card 1: Permanent Residence -->
                <div class="bg-gray-900 p-8 rounded-xl shadow-lg border border-gray-800">
                    <h3 class="text-xl font-bold text-white mb-2">Permanent Residence</h3>
                    <p class="text-gray-400 mb-4">Pathways for skilled workers, families, and business investors to become permanent residents of Canada.</p>
                    <ul class="list-disc list-inside text-gray-400 space-y-1">
                        <li>Express Entry (PNP, FSW, FST)</li>
                        <li>Family Sponsorship</li>
                        <li>Economic Class Programs</li>
                    </ul>
                    <div class="mt-4 text-sm text-blue-400 font-semibold">From $5,000 CAD</div>
                </div>
                <!-- Service Card 2: Temporary Permits -->
                <div class="bg-gray-900 p-8 rounded-xl shadow-lg border border-gray-800">
                    <h3 class="text-xl font-bold text-white mb-2">Temporary Visas & Permits</h3>
                    <p class="text-gray-400 mb-4">Assistance for individuals seeking to visit, work, or study in Canada on a temporary basis.</p>
                    <ul class="list-disc list-inside text-gray-400 space-y-1">
                        <li>Work Permits (LMIA)</li>
                        <li>Tourist/Visitor Visas</li>
                        <li>Student Permits</li>
                    </ul>
                    <div class="mt-4 text-sm text-blue-400 font-semibold">From $1,250 CAD</div>
                </div>
                <!-- Service Card 3: Corporate Services -->
                <div class="bg-gray-900 p-8 rounded-xl shadow-lg border border-gray-800">
                    <h3 class="text-xl font-bold text-white mb-2">Corporate & Business</h3>
                    <p class="text-gray-400 mb-4">Specialized services for businesses, entrepreneurs, and agricultural professionals.</p>
                     <ul class="list-disc list-inside text-gray-400 space-y-1">
                        <li>Business Class Residence</li>
                        <li>Self-Employed Persons</li>
                        <li>Professional Farmers</li>
                    </ul>
                    <div class="mt-4 text-sm text-blue-400 font-semibold">From $9,000 CAD</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Process Section -->
    <section id="process" class="py-20 md:py-32 bg-gray-900">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-extrabold text-white sm:text-4xl">How We Work With You</h2>
                <p class="mt-4 text-lg text-gray-400 max-w-3xl mx-auto">We are fully aware of how important it is for you to know where you are at and what would come up next, so we have drafted a step by step procedure and guideline to give you a better understanding of what our work with you entails.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 text-center">
                <!-- Step 1 -->
                <div class="bg-black p-6 rounded-lg border border-gray-800">
                    <div class="text-blue-500 font-extrabold text-4xl mb-4">01</div>
                    <h3 class="text-xl font-bold text-white mb-2">Registration</h3>
                    <p class="text-gray-400">Contact us to confirm if we can help. We'll provide a brief, detailed explanation of our process and potential costs.</p>
                </div>
                <!-- Step 2 -->
                <div class="bg-black p-6 rounded-lg border border-gray-800">
                    <div class="text-blue-500 font-extrabold text-4xl mb-4">02</div>
                    <h3 class="text-xl font-bold text-white mb-2">Profile Assessment</h3>
                    <p class="text-gray-400">For prospective clients, consultations begin with a detailed profile assessment to determine eligible Canadian immigration program options.</p>
                </div>
                <!-- Step 3 -->
                 <div class="bg-black p-6 rounded-lg border border-gray-800">
                    <div class="text-blue-500 font-extrabold text-4xl mb-4">03</div>
                    <h3 class="text-xl font-bold text-white mb-2">Application & Documentation</h3>
                    <p class="text-gray-400">After the first consultation, we will help you prepare and submit the required documentation for your chosen immigration stream.</p>
                </div>
                <!-- Step 4 -->
                 <div class="bg-black p-6 rounded-lg border border-gray-800">
                    <div class="text-blue-500 font-extrabold text-4xl mb-4">04</div>
                    <h3 class="text-xl font-bold text-white mb-2">Keeping You Informed</h3>
                    <p class="text-gray-400">We understand that it may be frustrating to be left in the dark. We promise to keep you informed every step of the way.</p>
                </div>
            </div>
        </div>
    </section>


    <!-- Contact & Assessment Form Section -->
    <section id="contact" class="py-20 md:py-32 bg-black">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-extrabold text-white sm:text-4xl">Start Your Comprehensive Assessment</h2>
          <p class="mt-4 text-lg text-gray-400">Complete our detailed profile assessment to receive personalized consultation and accurate service pricing tailored to your immigration goals.</p>
        </div>

        <div class="max-w-4xl mx-auto bg-gray-900 p-8 rounded-2xl shadow-2xl border border-gray-800">
          <div id="assessment-form-container">
            <!-- Progress Bar -->
            <div class="mb-8">
              <div class="flex justify-between mb-2">
                <span id="progress-text" class="text-sm font-medium text-gray-400">Step 1 of 8</span>
                <span id="progress-percent" class="text-sm font-medium text-white">0%</span>
              </div>
              <div class="w-full bg-gray-700 rounded-full h-2.5">
                <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full progress-bar-fill" style="width: 0%"></div>
              </div>
            </div>

            <form id="assessment-form">
              <!-- Step 1: Personal Information -->
              <div id="step-1" class="form-step active">
                <h3 class="text-2xl font-semibold text-white mb-6">Personal Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label for="fullName" class="block text-sm font-medium text-gray-300 mb-2">Full Legal Name *</label>
                    <input type="text" id="fullName" name="fullName" required class="w-full bg-gray-800 border border-gray-700 text-white rounded-lg p-3 focus:ring-blue-500 focus:border-blue-500">
                  </div>
                  <div>
                    <label for="email" class="block text-sm font-medium text-gray-300 mb-2">Email Address *</label>
                    <input type="email" id="email" name="email" required class="w-full bg-gray-800 border border-gray-700 text-white rounded-lg p-3 focus:ring-blue-500 focus:border-blue-500">
                  </div>
                  <div>
                    <label for="phone" class="block text-sm font-medium text-gray-300 mb-2">Phone Number *</label>
                    <input type="tel" id="phone" name="phone" required class="w-full bg-gray-800 border border-gray-700 text-white rounded-lg p-3 focus:ring-blue-500 focus:border-blue-500">
                  </div>
                  <div>
                    <label for="countryOfResidence" class="block text-sm font-medium text-gray-300 mb-2">Country of Residence *</label>
                    <div class="custom-dropdown">
                      <button type="button" class="dropdown-button" id="countryDropdownBtn">
                        <span id="countrySelectedText">Select Country</span>
                        <svg class="dropdown-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                      </button>
                      <div class="dropdown-menu" id="countryDropdownMenu">
                        <div class="dropdown-option" data-value="United States">United States</div>
                        <div class="dropdown-option" data-value="United Kingdom">United Kingdom</div>
                        <div class="dropdown-option" data-value="India">India</div>
                        <div class="dropdown-option" data-value="Nigeria">Nigeria</div>
                        <div class="dropdown-option" data-value="Philippines">Philippines</div>
                        <div class="dropdown-option" data-value="Pakistan">Pakistan</div>
                        <div class="dropdown-option" data-value="China">China</div>
                        <div class="dropdown-option" data-value="Iran">Iran</div>
                        <div class="dropdown-option" data-value="South Korea">South Korea</div>
                        <div class="dropdown-option" data-value="Bangladesh">Bangladesh</div>
                        <div class="dropdown-option" data-value="Other">Other (Please specify in notes)</div>
                      </div>
                    </div>
                    <input type="hidden" id="countryOfResidence" name="countryOfResidence" required>
                  </div>
                </div>
              </div>
              
              <!-- Step 2: Primary Immigration Goal -->
              <div id="step-2" class="form-step">
                 <h3 class="text-2xl font-semibold text-white mb-6">What is your primary immigration goal?</h3>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <label>
                        <input type="radio" name="primaryGoal" value="Work in Canada" class="sr-only">
                        <div class="radio-card p-6 bg-gray-800 border-2 border-gray-700 rounded-lg cursor-pointer">
                          <div class="font-semibold text-white">Permanent Residence - Work</div>
                          <div class="text-sm text-gray-400 mt-1">Express Entry, Provincial Nominee Program</div>
                          <div class="text-sm text-blue-400 font-semibold mt-2">$5,000 CAD</div>
                        </div>
                    </label>
                    <label>
                        <input type="radio" name="primaryGoal" value="Study in Canada" class="sr-only">
                        <div class="radio-card p-6 bg-gray-800 border-2 border-gray-700 rounded-lg cursor-pointer">
                          <div class="font-semibold text-white">Study in Canada</div>
                          <div class="text-sm text-gray-400 mt-1">Study permits, college enrollment</div>
                          <div class="text-sm text-blue-400 font-semibold mt-2">$2,750 CAD</div>
                        </div>
                    </label>
                    <label>
                        <input type="radio" name="primaryGoal" value="Join Family" class="sr-only">
                        <div class="radio-card p-6 bg-gray-800 border-2 border-gray-700 rounded-lg cursor-pointer">
                          <div class="font-semibold text-white">Family Sponsorship</div>
                          <div class="text-sm text-gray-400 mt-1">Spouse, parent, child sponsorship</div>
                          <div class="text-sm text-blue-400 font-semibold mt-2">$5,000 CAD</div>
                        </div>
                    </label>
                    <label>
                        <input type="radio" name="primaryGoal" value="Visit Canada" class="sr-only">
                        <div class="radio-card p-6 bg-gray-800 border-2 border-gray-700 rounded-lg cursor-pointer">
                          <div class="font-semibold text-white">Visit Canada</div>
                          <div class="text-sm text-gray-400 mt-1">Tourist visa, temporary visit</div>
                          <div class="text-sm text-blue-400 font-semibold mt-2">$1,250 CAD</div>
                        </div>
                    </label>
                     <label>
                        <input type="radio" name="primaryGoal" value="Invest/Start a Business" class="sr-only">
                        <div class="radio-card p-6 bg-gray-800 border-2 border-gray-700 rounded-lg cursor-pointer">
                          <div class="font-semibold text-white">Business Immigration</div>
                          <div class="text-sm text-gray-400 mt-1">Investor, entrepreneur, self-employed</div>
                          <div class="text-sm text-blue-400 font-semibold mt-2">$9,000 CAD</div>
                        </div>
                    </label>
                     <label>
                        <input type="radio" name="primaryGoal" value="Work Permit" class="sr-only">
                        <div class="radio-card p-6 bg-gray-800 border-2 border-gray-700 rounded-lg cursor-pointer">
                          <div class="font-semibold text-white">Work Permit</div>
                          <div class="text-sm text-gray-400 mt-1">LMIA, TFWP, temporary work</div>
                          <div class="text-sm text-blue-400 font-semibold mt-2">$2,500 CAD</div>
                        </div>
                    </label>
                 </div>
              </div>

              <!-- Step 3: Education & Field of Study -->
              <div id="step-3" class="form-step">
                <h3 class="text-2xl font-semibold text-white mb-6">Education Background</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label for="educationLevel" class="block text-sm font-medium text-gray-300 mb-2">Highest Level of Education *</label>
                    <div class="custom-dropdown">
                      <button type="button" class="dropdown-button" id="educationDropdownBtn">
                        <span id="educationSelectedText">Select Education Level</span>
                        <svg class="dropdown-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                      </button>
                      <div class="dropdown-menu" id="educationDropdownMenu">
                        <div class="dropdown-option" data-value="High School">High School Diploma</div>
                        <div class="dropdown-option" data-value="Trade Certificate">Trade/Vocational Certificate</div>
                        <div class="dropdown-option" data-value="Diploma">Diploma (1-2 years)</div>
                        <div class="dropdown-option" data-value="Bachelor's Degree">Bachelor's Degree</div>
                        <div class="dropdown-option" data-value="Master's Degree">Master's Degree</div>
                        <div class="dropdown-option" data-value="PhD">Doctorate (PhD)</div>
                      </div>
                    </div>
                    <input type="hidden" id="educationLevel" name="educationLevel" required>
                  </div>
                  <div>
                    <label for="fieldOfStudy" class="block text-sm font-medium text-gray-300 mb-2">Field of Study/Major *</label>
                    <input type="text" id="fieldOfStudy" name="fieldOfStudy" required class="w-full bg-gray-800 border border-gray-700 text-white rounded-lg p-3 focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., Computer Science, Business Administration">
                  </div>
                  <div class="col-span-1 md:col-span-2">
                    <label class="block text-sm font-medium text-gray-300 mb-4">Do you have an acceptance letter from a Canadian educational institution?</label>
                    <div class="space-y-3">
                      <div class="custom-radio">
                        <input type="radio" id="acceptanceYes" name="hasAcceptanceLetter" value="Yes">
                        <label for="acceptanceYes" class="text-white">Yes, I have an acceptance letter</label>
                      </div>
                      <div class="custom-radio">
                        <input type="radio" id="acceptanceNo" name="hasAcceptanceLetter" value="No">
                        <label for="acceptanceNo" class="text-white">No, I don't have an acceptance letter</label>
                      </div>
                      <div class="custom-radio">
                        <input type="radio" id="acceptanceNA" name="hasAcceptanceLetter" value="Not Applicable">
                        <label for="acceptanceNA" class="text-white">Not applicable to my case</label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Step 4: Work & Management Experience -->
              <div id="step-4" class="form-step">
                <h3 class="text-2xl font-semibold text-white mb-6">Professional Experience</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label for="workExperience" class="block text-sm font-medium text-gray-300 mb-2">Years of Skilled Work Experience *</label>
                    <div class="custom-dropdown">
                      <button type="button" class="dropdown-button" id="workExpDropdownBtn">
                        <span id="workExpSelectedText">Select Experience</span>
                        <svg class="dropdown-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                      </button>
                      <div class="dropdown-menu" id="workExpDropdownMenu">
                        <div class="dropdown-option" data-value="None">No work experience</div>
                        <div class="dropdown-option" data-value="Less than 1 year">Less than 1 year</div>
                        <div class="dropdown-option" data-value="1 year">1 year</div>
                        <div class="dropdown-option" data-value="2 years">2 years</div>
                        <div class="dropdown-option" data-value="3 years">3 years</div>
                        <div class="dropdown-option" data-value="4 years">4 years</div>
                        <div class="dropdown-option" data-value="5+ years">5+ years</div>
                      </div>
                    </div>
                    <input type="hidden" id="workExperience" name="workExperience" required>
                  </div>
                  <div>
                    <label for="mgmtExperience" class="block text-sm font-medium text-gray-300 mb-2">Years of Management Experience</label>
                    <div class="custom-dropdown">
                      <button type="button" class="dropdown-button" id="mgmtExpDropdownBtn">
                        <span id="mgmtExpSelectedText">Select Management Experience</span>
                        <svg class="dropdown-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                      </button>
                      <div class="dropdown-menu" id="mgmtExpDropdownMenu">
                        <div class="dropdown-option" data-value="None">No management experience</div>
                        <div class="dropdown-option" data-value="Less than 1 year">Less than 1 year</div>
                        <div class="dropdown-option" data-value="1 year">1 year</div>
                        <div class="dropdown-option" data-value="2 years">2 years</div>
                        <div class="dropdown-option" data-value="3 years">3 years</div>
                        <div class="dropdown-option" data-value="4 years">4 years</div>
                        <div class="dropdown-option" data-value="5+ years">5+ years</div>
                      </div>
                    </div>
                    <input type="hidden" id="mgmtExperience" name="mgmtExperience">
                  </div>
                  <div class="col-span-1 md:col-span-2">
                    <label for="occupation" class="block text-sm font-medium text-gray-300 mb-2">Current/Most Recent Occupation *</label>
                    <input type="text" id="occupation" name="occupation" required class="w-full bg-gray-800 border border-gray-700 text-white rounded-lg p-3 focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., Software Developer, Marketing Manager">
                  </div>
                </div>
              </div>

              <!-- Step 5: Family/Sponsorship Information -->
              <div id="step-5" class="form-step">
                <h3 class="text-2xl font-semibold text-white mb-6">Family & Sponsorship Information</h3>
                <div class="space-y-6">
                  <div>
                    <label class="block text-sm font-medium text-gray-300 mb-4">Are you being sponsored by someone or do you have family in Canada?</label>
                    <div class="space-y-3">
                      <div class="custom-radio">
                        <input type="radio" id="sponsorSpouse" name="sponsorRelationship" value="Spouse/Partner">
                        <label for="sponsorSpouse" class="text-white">Spouse/Partner</label>
                      </div>
                      <div class="custom-radio">
                        <input type="radio" id="sponsorParent" name="sponsorRelationship" value="Parent">
                        <label for="sponsorParent" class="text-white">Parent</label>
                      </div>
                      <div class="custom-radio">
                        <input type="radio" id="sponsorChild" name="sponsorRelationship" value="Child">
                        <label for="sponsorChild" class="text-white">Child</label>
                      </div>
                      <div class="custom-radio">
                        <input type="radio" id="sponsorSibling" name="sponsorRelationship" value="Sibling">
                        <label for="sponsorSibling" class="text-white">Sibling</label>
                      </div>
                      <div class="custom-radio">
                        <input type="radio" id="sponsorOther" name="sponsorRelationship" value="Other Relative">
                        <label for="sponsorOther" class="text-white">Other Relative</label>
                      </div>
                      <div class="custom-radio">
                        <input type="radio" id="sponsorNone" name="sponsorRelationship" value="No Sponsor">
                        <label for="sponsorNone" class="text-white">No sponsor/family in Canada</label>
                      </div>
                    </div>
                  </div>
                  <div id="sponsorStatusDiv" style="display: none;">
                    <label class="block text-sm font-medium text-gray-300 mb-4">What is your sponsor's status in Canada?</label>
                    <div class="space-y-3">
                      <div class="custom-radio">
                        <input type="radio" id="statusCitizen" name="sponsorStatus" value="Canadian Citizen">
                        <label for="statusCitizen" class="text-white">Canadian Citizen</label>
                      </div>
                      <div class="custom-radio">
                        <input type="radio" id="statusPR" name="sponsorStatus" value="Permanent Resident">
                        <label for="statusPR" class="text-white">Permanent Resident</label>
                      </div>
                      <div class="custom-radio">
                        <input type="radio" id="statusWork" name="sponsorStatus" value="Work Permit">
                        <label for="statusWork" class="text-white">Work Permit Holder</label>
                      </div>
                      <div class="custom-radio">
                        <input type="radio" id="statusStudent" name="sponsorStatus" value="Student">
                        <label for="statusStudent" class="text-white">Student</label>
                      </div>
                      <div class="custom-radio">
                        <input type="radio" id="statusOther" name="sponsorStatus" value="Other">
                        <label for="statusOther" class="text-white">Other Status</label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Step 6: Financial Information -->
              <div id="step-6" class="form-step">
                <h3 class="text-2xl font-semibold text-white mb-6">Financial Information</h3>
                <p class="text-gray-400 mb-6">This information helps us assess your eligibility and provide accurate advice. All information is kept strictly confidential.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label for="proofOfFunds" class="block text-sm font-medium text-gray-300 mb-2">Available Settlement Funds (CAD) *</label>
                    <div class="custom-dropdown">
                      <button type="button" class="dropdown-button" id="fundsDropdownBtn">
                        <span id="fundsSelectedText">Select Fund Range</span>
                        <svg class="dropdown-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                      </button>
                      <div class="dropdown-menu" id="fundsDropdownMenu">
                        <div class="dropdown-option" data-value="Less than $15,000">Less than $15,000</div>
                        <div class="dropdown-option" data-value="$15,000 - $25,000">$15,000 - $25,000</div>
                        <div class="dropdown-option" data-value="$25,000 - $50,000">$25,000 - $50,000</div>
                        <div class="dropdown-option" data-value="$50,000 - $100,000">$50,000 - $100,000</div>
                        <div class="dropdown-option" data-value="$100,000 - $500,000">$100,000 - $500,000</div>
                        <div class="dropdown-option" data-value="More than $500,000">More than $500,000</div>
                      </div>
                    </div>
                    <input type="hidden" id="proofOfFunds" name="proofOfFunds" required>
                  </div>
                  <div>
                    <label for="netWorth" class="block text-sm font-medium text-gray-300 mb-2">Estimated Net Worth (CAD)</label>
                    <div class="custom-dropdown">
                      <button type="button" class="dropdown-button" id="netWorthDropdownBtn">
                        <span id="netWorthSelectedText">Select Net Worth Range</span>
                        <svg class="dropdown-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                      </button>
                      <div class="dropdown-menu" id="netWorthDropdownMenu">
                        <div class="dropdown-option" data-value="Less than $50,000">Less than $50,000</div>
                        <div class="dropdown-option" data-value="$50,000 - $100,000">$50,000 - $100,000</div>
                        <div class="dropdown-option" data-value="$100,000 - $250,000">$100,000 - $250,000</div>
                        <div class="dropdown-option" data-value="$250,000 - $500,000">$250,000 - $500,000</div>
                        <div class="dropdown-option" data-value="$500,000 - $1,000,000">$500,000 - $1,000,000</div>
                        <div class="dropdown-option" data-value="More than $1,000,000">More than $1,000,000</div>
                      </div>
                    </div>
                    <input type="hidden" id="netWorth" name="netWorth">
                  </div>
                </div>
              </div>

              <!-- Step 7: Additional Information -->
              <div id="step-7" class="form-step">
                <h3 class="text-2xl font-semibold text-white mb-6">Additional Information</h3>
                <div>
                  <label for="additionalNotes" class="block text-sm font-medium text-gray-300 mb-2">Additional Notes or Specific Questions</label>
                  <textarea id="additionalNotes" name="additionalNotes" rows="5" class="w-full bg-gray-800 border border-gray-700 text-white rounded-lg p-3 focus:ring-blue-500 focus:border-blue-500" placeholder="Please share any additional information about your situation, specific questions, or concerns you'd like us to address during your consultation..."></textarea>
                </div>
              </div>
              
              <!-- Step 8: Payment -->
              <div id="step-8" class="form-step">
                <h3 class="text-2xl font-semibold text-white mb-2">Professional Consultation Fee</h3>
                <p class="text-gray-400 mb-6">This covers a comprehensive assessment of your profile, personalized immigration strategy, and ongoing application support.</p>
                
                <div class="bg-gray-800 p-6 rounded-lg border border-gray-700 text-center mb-6">
                    <p class="text-lg text-gray-300">Total Professional Fee</p>
                    <p id="total-price" class="text-4xl font-extrabold text-white price-update">C$2,500.00</p>
                    <p id="service-description" class="text-sm text-gray-400 mt-2">Work Permit Application Support</p>
                </div>
                
                <h4 class="text-xl font-semibold text-white mb-4">Secure Payment</h4>
                <div id="payment-element" class="mb-4">
                  <!-- A Stripe Element will be inserted here. -->
                </div>
                <div id="payment-message" class="hidden text-red-400 mb-4"></div>
              </div>


              <!-- Navigation Buttons -->
              <div class="mt-8 flex justify-between items-center">
                <button type="button" id="prev-btn" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300" style="display: none;">Back</button>
                <button type="button" id="next-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 ml-auto">Next</button>
                <button type="submit" id="submit-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 ml-auto" style="display: none;">Pay & Submit</button>
              </div>
            </form>
          </div>
          <!-- Success/Loading Message -->
          <div id="form-feedback" class="hidden text-center p-8">
             <div id="loading-spinner" class="hidden animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"></div>
             <h3 id="feedback-title" class="text-2xl font-bold text-white"></h3>
             <p id="feedback-message" class="text-gray-300 mt-2"></p>
          </div>
        </div>
      </div>
    </section>
  </main>

 <!-- Footer -->
<footer class="bg-black border-t border-gray-800">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="flex flex-col items-center space-y-4">
      
      <!-- Social Media Links -->
      <div class="flex space-x-6">
        <a href="https://www.youtube.com/channel/UCVxVhsXkaVeKKuerb0ry9gA?view_as=subscriber" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition duration-300">
          <span class="sr-only">YouTube</span>
          <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
            <path d="M23.498 6.186a2.83 2.83 0 0 0-2.003-2.003C19.622 3.7 12 3.7 12 3.7s-7.622 0-9.495.483A2.83 2.83 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a2.83 2.83 0 0 0 2.003 2.003C4.378 20.3 12 20.3 12 20.3s7.622 0 9.495-.483a2.83 2.83 0 0 0 2.003-2.003C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
          </svg>
        </a>
        
        <a href="https://www.facebook.com/culyeimmigrationInc/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition duration-300">
          <span class="sr-only">Facebook</span>
          <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>
        </a>
        
        <a href="https://x.com/Culye_immigrate" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition duration-300">
          <span class="sr-only">X (Twitter)</span>
          <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
          </svg>
        </a>

        <a href="https://www.instagram.com/culyeimmigrationservices/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition duration-300">
          <span class="sr-only">Instagram</span>
          <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
            <path d="M7.5 2h9A5.5 5.5 0 0 1 22 7.5v9a5.5 5.5 0 0 1-5.5 5.5h-9A5.5 5.5 0 0 1 2 16.5v-9A5.5 5.5 0 0 1 7.5 2zm0 2A3.5 3.5 0 0 0 4 7.5v9A3.5 3.5 0 0 0 7.5 20h9a3.5 3.5 0 0 0 3.5-3.5v-9A3.5 3.5 0 0 0 16.5 4h-9zm9.75 1.5a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0V6.25a.75.75 0 0 1 .75-.75zM12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 2a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"/>
          </svg>
        </a>
      </div>
      
      <!-- Copyright -->
      <div class="text-center text-gray-400">
        <p>&copy; 2024 Culye Immigration Services Inc. All rights reserved.</p>
        <p class="text-sm mt-2">Based in Edmonton, Alberta. Serving clients globally.</p>
      </div>
      
    </div>
  </div>
</footer>


  <script>
    // Wait for DOM to be fully loaded
    document.addEventListener('DOMContentLoaded', function() {
        initializeEverything();
    });
    
    function initializeEverything() {
        // Global error handler
        window.addEventListener('error', function(e) {
      console.error('JavaScript Error:', e.error || e.message);
      console.error('Error details:', {
        message: e.message,
        filename: e.filename,
        lineno: e.lineno,
        colno: e.colno,
        error: e.error
      });
    });

    // Check if required libraries are loaded
    if (typeof Stripe === 'undefined') {
      console.error('Stripe.js failed to load');
      alert('Payment system unavailable. Please refresh the page.');
    }

    // Mobile Menu Toggle
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    
    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
        const firstSvg = mobileMenuButton.querySelector('svg:first-child');
        const lastSvg = mobileMenuButton.querySelector('svg:last-child');
        if (firstSvg) firstSvg.classList.toggle('hidden');
        if (lastSvg) lastSvg.classList.toggle('block');
      });
    }

    // Header scroll effect with mobile menu auto-dismiss
    const header = document.getElementById('header');
    if (header) {
      window.addEventListener('scroll', () => {
        // Header background effect
        if (window.scrollY > 50) {
          header.classList.add('bg-gray-900', 'shadow-lg');
          header.classList.remove('bg-gray-900/80');
        } else {
          header.classList.remove('bg-gray-900', 'shadow-lg');
          header.classList.add('bg-gray-900/80');
        }
        
        // Auto-dismiss mobile menu when scrolling
        if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
          mobileMenu.classList.add('hidden');
          const firstSvg = mobileMenuButton.querySelector('svg:first-child');
          const lastSvg = mobileMenuButton.querySelector('svg:last-child');
          if (firstSvg) firstSvg.classList.remove('hidden');
          if (lastSvg) lastSvg.classList.add('hidden');
        }
      });
    }
    
    // Smooth scroll for nav links
    function smoothScroll(target) {
      const element = document.querySelector(target);
      if (element) {
        element.scrollIntoView({ behavior: 'smooth' });
      }
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const href = this.getAttribute('href');
        smoothScroll(href);
        if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
          mobileMenu.classList.add('hidden');
          const firstSvg = mobileMenuButton.querySelector('svg:first-child');
          const lastSvg = mobileMenuButton.querySelector('svg:last-child');
          if (firstSvg) firstSvg.classList.remove('hidden');
          if (lastSvg) lastSvg.classList.add('hidden');
        }
      });
    });

    // Industry-standard pricing table
    const pricingTable = {
      "Work in Canada": { price: 5000, description: "Express Entry & Provincial Nominee Programs" },
      "Study in Canada": { price: 2750, description: "Study Permit & Educational Institution Support" },
      "Join Family": { price: 5000, description: "Family Sponsorship & Spousal Applications" },
      "Visit Canada": { price: 1250, description: "Visitor Visa & Temporary Residence" },
      "Invest/Start a Business": { price: 9000, description: "Business Class Immigration & Investment Programs" },
      "Work Permit": { price: 2500, description: "Work Permit Application Support" }
    };

    // Form elements
    const steps = Array.from(document.querySelectorAll('.form-step'));
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const submitBtn = document.getElementById('submit-btn');
    const form = document.getElementById('assessment-form');
    const progressBar = document.getElementById('progress-bar');
    const progressText = document.getElementById('progress-text');
    const progressPercent = document.getElementById('progress-percent');
    
    const formContainer = document.getElementById('assessment-form-container');
    const formFeedback = document.getElementById('form-feedback');
    const loadingSpinner = document.getElementById('loading-spinner');
    const feedbackTitle = document.getElementById('feedback-title');
    const feedbackMessage = document.getElementById('feedback-message');

    const totalPriceElement = document.getElementById('total-price');
    const serviceDescriptionElement = document.getElementById('service-description');

    let currentStep = 0;
    let currentServiceType = "Work Permit";
    let currentClientSecret = null;

    const stepConditions = {
        'Work in Canada': [0, 1, 2, 3, 4, 5, 6, 7],
        'Study in Canada': [0, 1, 2, 4, 5, 6, 7],
        'Invest/Start a Business': [0, 1, 2, 3, 5, 6, 7],
        'Join Family': [0, 1, 2, 4, 6, 7],
        'Visit Canada': [0, 1, 6, 7],
        'Work Permit': [0, 1, 2, 3, 5, 6, 7],
    };

    let activeSteps = [];
    
    function calculateActiveSteps() {
      try {
        const primaryGoal = document.querySelector('input[name="primaryGoal"]:checked');
        const goalValue = primaryGoal ? primaryGoal.value : 'Work Permit';
        activeSteps = stepConditions[goalValue].map(i => steps[i]);
        currentServiceType = goalValue;
        updatePricing();
      } catch (error) {
        console.error('Error calculating active steps:', error);
      }
    }

    function updatePricing() {
      try {
        const pricing = pricingTable[currentServiceType];
        if (pricing && totalPriceElement && serviceDescriptionElement) {
          totalPriceElement.textContent = `C$${pricing.price.toLocaleString()}.00`;
          serviceDescriptionElement.textContent = pricing.description;
        }
      } catch (error) {
        console.error('Error updating pricing:', error);
      }
    }

    function updateFormView() {
      try {
        steps.forEach(step => step.classList.remove('active'));
        if (activeSteps[currentStep]) {
          activeSteps[currentStep].classList.add('active');
        }

        const totalActiveSteps = activeSteps.length;
        const progress = totalActiveSteps > 1 ? ((currentStep) / (totalActiveSteps - 1)) * 100 : 0;

        if (progressBar) progressBar.style.width = `${progress}%`;
        if (progressText) progressText.textContent = `Step ${currentStep + 1} of ${totalActiveSteps}`;
        if (progressPercent) progressPercent.textContent = `${Math.round(progress)}%`;

        if (prevBtn) prevBtn.style.display = currentStep > 0 ? 'inline-block' : 'none';
        if (nextBtn) nextBtn.style.display = currentStep < totalActiveSteps - 1 ? 'inline-block' : 'none';
        if (submitBtn) submitBtn.style.display = currentStep === totalActiveSteps - 1 ? 'inline-block' : 'none';
      } catch (error) {
        console.error('Error updating form view:', error);
      }
    }
    
    function validateStep() {
      try {
        const currentStepElement = activeSteps[currentStep];
        
        // Check required text inputs and hidden inputs (from dropdowns)
        const requiredInputs = currentStepElement.querySelectorAll('input[required], select[required]');
        for (let input of requiredInputs) {
          if (!input.value || input.value.trim() === '') {
            input.focus();
            const label = currentStepElement.querySelector(`label[for="${input.id}"]`);
            const fieldName = label ? label.textContent.replace(' *', '') : input.name;
            showValidationMessage(`Please fill out the ${fieldName} field.`);
            return false;
          }
        }
        
        // Check radio button groups
        const radioGroups = {};
        const radios = currentStepElement.querySelectorAll('input[type="radio"]');
        radios.forEach(radio => {
          if (!radioGroups[radio.name]) {
            radioGroups[radio.name] = [];
          }
          radioGroups[radio.name].push(radio);
        });
        
        for (const groupName in radioGroups) {
          const group = radioGroups[groupName];
          const isChecked = group.some(radio => radio.checked);
          if (group.length > 0 && !isChecked) {
            showValidationMessage("Please select an option.");
            return false;
          }
        }
        
        return true;
      } catch (error) {
        console.error('Error validating step:', error);
        return false;
      }
    }

    function showValidationMessage(message) {
      // You can customize this to show a nicer validation message
      alert(message);
    }

    // Event listeners with error handling
    if (nextBtn) {
      nextBtn.addEventListener('click', () => {
        try {
          if (validateStep()) {
            if (currentStep === 1) {
              calculateActiveSteps();
            }
            if (currentStep < activeSteps.length - 1) {
              currentStep++;
              updateFormView();
              
              // Initialize Stripe when reaching payment step
              if (currentStep === activeSteps.length - 1) {
                initializeStripe();
              }
            }
          }
        } catch (error) {
          console.error('Error in next button handler:', error);
        }
      });
    }

    if (prevBtn) {
      prevBtn.addEventListener('click', () => {
        try {
          if (currentStep > 0) {
            currentStep--;
            if (currentStep === 1) {
              calculateActiveSteps();
            }
            updateFormView();
          }
        } catch (error) {
          console.error('Error in prev button handler:', error);
        }
      });
    }
    
    document.querySelectorAll('input[name="primaryGoal"]').forEach(radio => {
      radio.addEventListener('change', () => {
        try {
          calculateActiveSteps();
        } catch (error) {
          console.error('Error in radio change handler:', error);
        }
      });
    });

    // Initialize form
    calculateActiveSteps();
    updateFormView();

    // Custom Dropdown Functionality
    function initCustomDropdowns() {
      const dropdowns = [
        { button: 'countryDropdownBtn', menu: 'countryDropdownMenu', selected: 'countrySelectedText', input: 'countryOfResidence' },
        { button: 'educationDropdownBtn', menu: 'educationDropdownMenu', selected: 'educationSelectedText', input: 'educationLevel' },
        { button: 'workExpDropdownBtn', menu: 'workExpDropdownMenu', selected: 'workExpSelectedText', input: 'workExperience' },
        { button: 'mgmtExpDropdownBtn', menu: 'mgmtExpDropdownMenu', selected: 'mgmtExpSelectedText', input: 'mgmtExperience' },
        { button: 'fundsDropdownBtn', menu: 'fundsDropdownMenu', selected: 'fundsSelectedText', input: 'proofOfFunds' },
        { button: 'netWorthDropdownBtn', menu: 'netWorthDropdownMenu', selected: 'netWorthSelectedText', input: 'netWorth' }
      ];

      dropdowns.forEach(dropdown => {
        const button = document.getElementById(dropdown.button);
        const menu = document.getElementById(dropdown.menu);
        const selectedText = document.getElementById(dropdown.selected);
        const hiddenInput = document.getElementById(dropdown.input);

        if (button && menu && selectedText && hiddenInput) {
          // Toggle dropdown
          button.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            // Close other dropdowns
            dropdowns.forEach(otherDropdown => {
              if (otherDropdown.button !== dropdown.button) {
                const otherMenu = document.getElementById(otherDropdown.menu);
                const otherButton = document.getElementById(otherDropdown.button);
                if (otherMenu && otherButton) {
                  otherMenu.classList.remove('active');
                  otherButton.classList.remove('active');
                }
              }
            });

            menu.classList.toggle('active');
            button.classList.toggle('active');
          });

          // Handle option selection
          menu.addEventListener('click', (e) => {
            if (e.target.classList.contains('dropdown-option')) {
              const value = e.target.getAttribute('data-value');
              selectedText.textContent = e.target.textContent;
              hiddenInput.value = value;
              
              // Remove active classes
              menu.classList.remove('active');
              button.classList.remove('active');
              
              // Update selected option styling
              menu.querySelectorAll('.dropdown-option').forEach(option => {
                option.classList.remove('selected');
              });
              e.target.classList.add('selected');
            }
          });
        }
      });

      // Close dropdowns when clicking outside
      document.addEventListener('click', (e) => {
        dropdowns.forEach(dropdown => {
          const button = document.getElementById(dropdown.button);
          const menu = document.getElementById(dropdown.menu);
          if (button && menu && !button.contains(e.target) && !menu.contains(e.target)) {
            menu.classList.remove('active');
            button.classList.remove('active');
          }
        });
      });
    }

    // Initialize dropdowns
    initCustomDropdowns();

    // Sponsor relationship conditional display
    document.addEventListener('change', (e) => {
      if (e.target.name === 'sponsorRelationship') {
        const sponsorStatusDiv = document.getElementById('sponsorStatusDiv');
        if (e.target.value === 'No Sponsor') {
          sponsorStatusDiv.style.display = 'none';
          // Clear sponsor status selection
          const sponsorStatusInputs = document.querySelectorAll('input[name="sponsorStatus"]');
          sponsorStatusInputs.forEach(input => input.checked = false);
        } else {
          sponsorStatusDiv.style.display = 'block';
        }
      }
    });

    // Update radio/checkbox styling
    document.addEventListener('change', (e) => {
      if (e.target.type === 'radio' || e.target.type === 'checkbox') {
        const container = e.target.closest('.custom-radio') || e.target.closest('.custom-checkbox');
        if (container) {
          // Remove checked class from siblings
          const siblings = container.parentElement.querySelectorAll('.custom-radio, .custom-checkbox');
          siblings.forEach(sibling => sibling.classList.remove('checked'));
          
          // Add checked class to current
          if (e.target.checked) {
            container.classList.add('checked');
          }
        }
      }
    });

    // --- STRIPE AND SUBMISSION LOGIC ---
    const stripePublicKey = "pk_test_51S1hMrPakOX6JEqhZYcA0CldRqEFyXZNYfQE2blJM6C161eZqCkVSC41IVkPTtmzh6eEARu0rNTWcseCg59RWb3Q00tS7RQ6aX";
    const functionUrl = "https://us-central1-culye-57a22.cloudfunctions.net/createPaymentIntent";

    let stripe;
    let elements;

    // Initialize Stripe safely
    try {
      if (typeof Stripe !== 'undefined' && stripePublicKey) {
        stripe = Stripe(stripePublicKey);
        console.log('Stripe initialized successfully');
      } else {
        console.error('Stripe or public key not available');
      }
    } catch (error) {
      console.error('Error initializing Stripe:', error);
    }

    // Initialize Stripe Elements with dynamic pricing
    async function initializeStripe() {
      if (!stripe) {
        console.error('Stripe not initialized');
        return;
      }

      try {
        console.log('Creating payment intent for:', currentServiceType);
        
        const response = await fetch(functionUrl, { 
          method: "POST",
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            serviceType: currentServiceType
          })
        });
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const result = await response.json();
        console.log('Payment intent created:', result);
        
        if (result.error) {
          throw new Error(result.error);
        }
        
        currentClientSecret = result.clientSecret;
        
        elements = stripe.elements({ clientSecret: currentClientSecret });
        const paymentElement = elements.create("payment");
        paymentElement.mount("#payment-element");
        
        console.log('Payment element mounted successfully');
      } catch (error) {
        console.error("Error initializing Stripe:", error);
        const paymentMessage = document.getElementById("payment-message");
        if (paymentMessage) {
          paymentMessage.textContent = `Could not initialize payment: ${error.message}. Please refresh and try again.`;
          paymentMessage.classList.remove('hidden');
        }
      }
    }

    // Handle form submission
    if (form) {
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        try {
          // Show loading state
if (submitBtn) {
  submitBtn.disabled = true;
  submitBtn.textContent = 'Processing Payment...';
}
if (loadingSpinner) loadingSpinner.classList.remove('hidden');

// Check if Stripe is properly initialized
if (!elements || !currentClientSecret) {
  // Try to initialize Stripe again
  try {
    await initializeStripe();
    await new Promise(resolve => setTimeout(resolve, 1000));
  } catch (error) {
    console.error('Failed to initialize Stripe:', error);
  }
  
  if (!elements || !currentClientSecret) {
    const paymentMessage = document.getElementById("payment-message");
    if (paymentMessage) {
      paymentMessage.textContent = "Payment system not ready. Please wait a moment and try again.";
      paymentMessage.classList.remove('hidden');
    }
    if (submitBtn) {
      submitBtn.disabled = false;
      submitBtn.textContent = 'Pay & Submit';
    }
    if (loadingSpinner) loadingSpinner.classList.add('hidden');
    return;
  }
}

// Submit payment elements first (required by Stripe)
const { error: submitError } = await elements.submit();
          if (submitError) {
            const paymentMessage = document.getElementById("payment-message");
            if (paymentMessage) {
              paymentMessage.textContent = submitError.message;
              paymentMessage.classList.remove('hidden');
            }
            if (submitBtn) {
              submitBtn.disabled = false;
              submitBtn.textContent = 'Pay & Submit';
            }
            if (loadingSpinner) loadingSpinner.classList.add('hidden');
            return;
          }

          // Confirm payment with Stripe
          
          // TEMPORARY: Skip payment for testing and submit directly to Google Sheets
console.log('Current form data before payment:', data);

// Test Google Sheets submission without payment
console.log('Testing Google Sheets submission...');
try {
  const testResponse = await fetch(scriptURL, { 
    method: 'POST', 
    body: JSON.stringify(data), 
    headers: {'Content-Type': 'application/json'} 
  });
  const testResult = await testResponse.text();
  console.log('Google Sheets test response:', testResult);
} catch (testError) {
  console.error('Google Sheets test failed:', testError);
}

// Continue with normal Stripe payment flow
const { error: stripeError } = await stripe.confirmPayment({
            elements,
            confirmParams: {
              return_url: window.location.href,
            },
            redirect: "if_required"
          });
          
          if (stripeError) {
            const paymentMessage = document.getElementById("payment-message");
            if (paymentMessage) {
              paymentMessage.textContent = stripeError.message;
              paymentMessage.classList.remove('hidden');
            }
            if (submitBtn) {
              submitBtn.disabled = false;
              submitBtn.textContent = 'Pay & Submit';
            }
            if (loadingSpinner) loadingSpinner.classList.add('hidden');
            return;
          }

          // Payment successful, submit to Google Sheet.
const data = {
  // Personal Information (Step 1)
  fullName: document.getElementById('fullName')?.value || '',
  email: document.getElementById('email')?.value || '',
  phone: document.getElementById('phone')?.value || '',
  countryOfResidence: document.getElementById('countryOfResidence')?.value || '',
  
  // Primary Goal (Step 2)
  primaryGoal: document.querySelector('input[name="primaryGoal"]:checked')?.value || '',
  
  // Education (Step 3)
  educationLevel: document.getElementById('educationLevel')?.value || '',
  fieldOfStudy: document.getElementById('fieldOfStudy')?.value || '',
  hasAcceptanceLetter: document.querySelector('input[name="hasAcceptanceLetter"]:checked')?.value || '',
  
  // Work Experience (Step 4)
  workExperience: document.getElementById('workExperience')?.value || '',
  mgmtExperience: document.getElementById('mgmtExperience')?.value || '',
  occupation: document.getElementById('occupation')?.value || '',
  
  // Family/Sponsorship (Step 5)
  sponsorRelationship: document.querySelector('input[name="sponsorRelationship"]:checked')?.value || '',
  sponsorStatus: document.querySelector('input[name="sponsorStatus"]:checked')?.value || '',
  
  // Financial (Step 6)
  proofOfFunds: document.getElementById('proofOfFunds')?.value || '',
  netWorth: document.getElementById('netWorth')?.value || '',
  
  // Additional Notes (Step 7)
  additionalNotes: document.getElementById('additionalNotes')?.value || ''
};
          data.timestamp = new Date().toISOString();
data.serviceType = currentServiceType;
data.feePaid = `C$${pricingTable[currentServiceType].price.toLocaleString()}.00`;
data.caseStatus = 'New Submission';
data.paymentStatus = 'Paid';


// CRITICAL DEBUG: Log exactly what we're sending
console.log('=== WEBSITE DATA BEING SENT ===');
console.log('Field names from website:', Object.keys(data));
console.log('Complete data object:', JSON.stringify(data, null, 2));

// EXPECTED GOOGLE SHEET HEADERS (from your screenshot)
const expectedHeaders = ['fullName', 'email', 'phone', 'countryOfResidence', 'primaryGoal', 'educationLevel', 'workExperience', 'occupation', 'proofOfFunds', 'serviceType', 'feePaid', 'timestamp'];
console.log('Expected headers:', expectedHeaders);

// Find mismatches
const websiteFields = Object.keys(data);
const missingFromWebsite = expectedHeaders.filter(header => !websiteFields.includes(header));
const extraInWebsite = websiteFields.filter(field => !expectedHeaders.includes(field));

if (missingFromWebsite.length > 0) {
  console.error(' MISSING FROM WEBSITE:', missingFromWebsite);
}
if (extraInWebsite.length > 0) {
  console.error(' EXTRA IN WEBSITE:', extraInWebsite);
}
console.log('=== END DEBUG ===');
          data.serviceType = currentServiceType;
          data.feePaid = `C$${pricingTable[currentServiceType].price.toLocaleString()}.00`;
          data.caseStatus = 'New Submission';
          data.paymentStatus = 'Paid';

          const scriptURL = 'https://script.google.com/macros/s/AKfycbwSQiodL0QZBWYQ1BeNTZ-ph7Nh1x6JoQ1BZ28L3y_I1lBN_7BeY4nk2gMIkWcEIsDlgg/exec';

// Test the URL first
console.log('Testing script URL...');
try {
  const testResponse = await fetch(scriptURL);
  const testText = await testResponse.text();
  console.log('Script URL test result:', testText);
} catch (testError) {
  console.error('Script URL test failed:', testError);
}
          
          try {
            const response = await fetch(scriptURL, { 
              method: 'POST', 
              body: JSON.stringify(data), 
              headers: {'Content-Type': 'application/json'} 
            });
            const result = await response.json();

            if (result.result === 'success') {
              if (formContainer) formContainer.classList.add('hidden');
              if (feedbackTitle) feedbackTitle.textContent = "Payment Successful!";
              if (feedbackMessage) feedbackMessage.textContent = "Thank you! Your payment has been processed and we've received your information. We will contact you within 2 business days to schedule your consultation.";
              if (formFeedback) formFeedback.classList.remove('hidden');
              if (loadingSpinner) loadingSpinner.classList.add('hidden');
            } else {
              throw new Error(result.error || 'Unknown error submitting to Google Sheet.');
            }
          } catch (error) {
  console.error('Detailed error submitting to Google Sheet:', error);
  console.error('Error name:', error.name);
  console.error('Error message:', error.message);
  console.error('Data being sent:', JSON.stringify(data, null, 2));
  
  // Try to get more details from the response if it exists
  if (error.response) {
    console.error('Response status:', error.response.status);
    console.error('Response text:', await error.response.text());
  }
            if (formContainer) formContainer.classList.add('hidden');
            if (feedbackTitle) feedbackTitle.textContent = "Payment Successful!";
            if (feedbackMessage) feedbackMessage.textContent = "Your payment was processed successfully. However, there was an issue recording your details. Please contact us directly at your earliest convenience. We will assist you promptly.";
            if (formFeedback) formFeedback.classList.remove('hidden');
            if (loadingSpinner) loadingSpinner.classList.add('hidden');
          }
        } catch (error) {
          console.error('Error in form submission:', error);
          const paymentMessage = document.getElementById("payment-message");
          if (paymentMessage) {
            paymentMessage.textContent = `An error occurred: ${error.message}`;
            paymentMessage.classList.remove('hidden');
          }
          if (submitBtn) {
            submitBtn.disabled = false;
            submitBtn.textContent = 'Pay & Submit';
          }
          if (loadingSpinner) loadingSpinner.classList.add('hidden');
        }
      });
    }}
  </script>

</body>
</html>